From 2b3b4d46d3727040684b340894f76eaaafc9c5a2 Mon Sep 17 00:00:00 2001
From: guihkx <626206+guihkx@users.noreply.github.com>
Date: Sun, 7 Sep 2025 12:26:41 -0300
Subject: [PATCH] Set a fixed release date

Backport of: https://github.com/martinrotter/rssguard/commit/7ec01c8dbafe45b55f133b0fd89384e8cb953abe
---
 CMakeLists.txt           | 5 +++--
 resources/text/CHANGELOG | 1 +
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 09f3999f2..1c1c6733f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -69,8 +69,9 @@
 cmake_minimum_required(VERSION 3.14.0)
 
 # Global variables describing the project.
-string(TIMESTAMP YEAR "%Y")
-string(TIMESTAMP DATE "%Y-%m-%d")
+file(STRINGS "resources/text/CHANGELOG" CHANGELOG)
+string(REGEX MATCH "[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]" DATE ${CHANGELOG})
+string(REGEX MATCH "[0-9][0-9][0-9][0-9]" YEAR ${DATE})
 
 set(APP_NAME "RSS Guard")
 set(APP_EMAIL "rotter.martinos@gmail.com")
diff --git a/resources/text/CHANGELOG b/resources/text/CHANGELOG
index af6d13360..e982c8676 100644
--- a/resources/text/CHANGELOG
+++ b/resources/text/CHANGELOG
@@ -1,5 +1,6 @@
 4.8.6
 -----
+Released on: 2025-09-07
 
 Dear users. This is (probably) the last release from 4.x line of RSS Guard.
 
-- 
2.51.0

