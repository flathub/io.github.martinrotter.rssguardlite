From 2b3b4d46d3727040684b340894f76eaaafc9c5a2 Mon Sep 17 00:00:00 2001
From: guihkx <626206+guihkx@users.noreply.github.com>
Date: Sat, 6 Sep 2025 13:28:49 -0300
Subject: [PATCH] Set a fixed release date

Backport of: https://github.com/martinrotter/rssguard/commit/7ec01c8dbafe45b55f133b0fd89384e8cb953abe
---
 CMakeLists.txt           | 5 +++--
 resources/text/CHANGELOG | 1 +
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index e7f3e4f82..ffe0ced50 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -69,8 +69,9 @@
 cmake_minimum_required(VERSION 3.14.0)
 
 # Global variables describing the project.
-string(TIMESTAMP YEAR "%Y")
-string(TIMESTAMP DATE "%Y-%m-%d")
+file(STRINGS "resources/text/CHANGELOG" CHANGELOG)
+string(REGEX MATCH "[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]" DATE ${CHANGELOG})
+string(REGEX MATCH "[0-9][0-9][0-9][0-9]" YEAR ${DATE})
 
 set(APP_NAME "RSS Guard")
 set(APP_EMAIL "rotter.martinos@gmail.com")
diff --git a/resources/text/CHANGELOG b/resources/text/CHANGELOG
index ccb1f7d97..437d9af2d 100644
--- a/resources/text/CHANGELOG
+++ b/resources/text/CHANGELOG
@@ -1,5 +1,6 @@
 4.8.5
 -----
+Released on: 2025-05-27
 
 Added:
 * All dropdown filters (for both feed and article lists) can now be assigned to keyboard shortcuts.
-- 
2.51.0

